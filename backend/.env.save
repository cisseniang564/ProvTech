# ====================================================================
# CONFIGURATION ENVIRONNEMENT PROVTECH HYBRIDE
# Fichier: /Users/cisseniang/Documents/ProvTech/backend/.env
# ====================================================================

# ============ SERVEUR ============
NODE_ENV=development
PORT=3001
FRONTEND_URL=http://localhost:3000

# ============ BASE DE DONNÉES ============
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_mysql_password
DB_NAME=provtech
DB_SSL=false

# ============ SÉCURITÉ JWT ============
# IMPORTANT: Générez des clés secrètes sécurisées en production !
# Commande pour générer: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=your-super-secure-jwt-secret-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secure-refresh-secret-change-this-in-production

# Durée de validité des tokens
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=7d

# ============ CHIFFREMENT ============
# Rounds de hachage bcrypt (12 = équilibre sécurité/performance)
BCRYPT_ROUNDS=12

# ============ LIMITATION DE DÉBIT ============
# Limite globale par IP (par 15min)
RATE_LIMIT_GLOBAL=1000

# Limite authentification par IP (par 15min)
RATE_LIMIT_AUTH=5

# ============ SESSIONS ============
SESSION_SECRET=your-session-secret-change-this
SESSION_COOKIE_SECURE=false
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_MAXAGE=86400000

# ============ CORS ============
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:8080

# ============ FONCTIONNALITÉS ============
# Activer/désactiver fonctionnalités
FEATURE_2FA_ENABLED=true
FEATURE_MIGRATION_ENABLED=true
FEATURE_AUDIT_LOGS=true
FEATURE_RATE_LIMITING=true

# ============ SÉCURITÉ CSP ============
CSP_DEFAULT_SRC='self'
CSP_SCRIPT_SRC='self' 'unsafe-inline'
CSP_STYLE_SRC='self' 'unsafe-inline'
CSP_IMG_SRC='self' data: https:

# ============ LOGS ============
LOG_LEVEL=info
LOG_FORMAT=combined
LOG_FILE_PATH=./logs/provtech.log

# ============ EMAIL (pour notifications futures) ============
EMAIL_ENABLED=false
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-app-password
EMAIL_FROM=noreply@provtech.com

# ============ BACKUP (pour futures fonctionnalités) ============
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups

# ============ SURVEILLANCE ============
HEALTH_CHECK_INTERVAL=60000
PERFORMANCE_MONITORING=true

# ============ MIGRATION PARAMÈTRES ============
# Forcer migration après X jours (optionnel)
FORCE_MIGRATION_AFTER_DAYS=90

# Permettre retour en arrière migration
ALLOW_MIGRATION_ROLLBACK=true

# ============ DÉVELOPPEMENT ============
# Debug mode (logs détaillés)
DEBUG_MODE=true
DEBUG_ROUTES=auth,migration,compatibility

# Authentification legacy autorisée
LEGACY_AUTH_ENABLED=true

# ============ PRODUCTION (à décommenter en production) ============
# NODE_ENV=production
# PORT=443
# DB_SSL=true
# SESSION_COOKIE_SECURE=true
# DEBUG_MODE=false
# LEGACY_AUTH_ENABLED=false

# ============ CONFORMITÉ ============
# Retention des logs d'audit (jours)
AUDIT_LOG_RETENTION_DAYS=2555  # 7 ans (IFRS 17)

# Chiffrement données sensibles
DATA_ENCRYPTION_KEY=your-data-encryption-key-32-chars

# ============ NOTES DE DÉPLOIEMENT ============
#
# 1. CHANGEZ TOUS LES SECRETS EN PRODUCTION !
# 2. Générez JWT_SECRET et JWT_REFRESH_SECRET uniques:
#    node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# 3. Configurez DB_PASSWORD avec votre mot de passe MySQL réel
# 4. En production, activez SSL (DB_SSL=true, SESSION_COOKIE_SECURE=true)
# 5. Désactivez DEBUG_MODE en production
# 6. Vérifiez que CORS_ORIGINS contient vos domaines de production
# 7. Configurez EMAIL_* pour les notifications utilisateurs
#
# ============ COMMANDES DE DÉMARRAGE ============
#
# Développement:
# npm install && npm run dev
#
# Production:
# npm install --production && npm start


